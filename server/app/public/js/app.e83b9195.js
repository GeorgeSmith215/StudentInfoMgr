(function(e){function t(t){for(var s,a,i=t[0],l=t[1],u=t[2],m=0,f=[];m<i.length;m++)a=i[m],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(f.length)f.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],s=!0,i=1;i<r.length;i++){var l=r[i];0!==o[l]&&(s=!1)}s&&(n.splice(t--,1),e=a(a.s=r[0]))}return e}var s={},o={app:0},n=[];function a(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=s,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(r,s,function(t){return e[t]}.bind(null,s));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"31d5":function(e,t,r){"use strict";r("eb07")},"31ed":function(e,t,r){"use strict";r("eb31")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("h1",[e._v("学生信息管理系统")]),r("router-view")],1)},n=[],a=(r("034f"),r("2877")),i={},l=Object(a["a"])(i,o,n,!1,null,null,null),u=l.exports,c=r("8c4f"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("el-button",{attrs:{type:"plain"},on:{click:e.logout}},[e._v("注销")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加学生")]),r("el-dialog",{attrs:{title:"请输入学生信息",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{model:{value:e.form.studentname,callback:function(t){e.$set(e.form,"studentname",t)},expression:"form.studentname"}})],1),r("el-form-item",{attrs:{label:"性别"}},[r("el-input",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}})],1),r("el-form-item",{attrs:{label:"年龄"}},[r("el-input",{model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),r("el-form-item",{attrs:{label:"班级"}},[r("el-input",{model:{value:e.form.clazz,callback:function(t){e.$set(e.form,"clazz",t)},expression:"form.clazz"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"请编辑学生信息",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{model:{value:e.formEdit.studentname,callback:function(t){e.$set(e.formEdit,"studentname",t)},expression:"formEdit.studentname"}})],1),r("el-form-item",{attrs:{label:"性别"}},[r("el-input",{model:{value:e.formEdit.sex,callback:function(t){e.$set(e.formEdit,"sex",t)},expression:"formEdit.sex"}})],1),r("el-form-item",{attrs:{label:"年龄"}},[r("el-input",{model:{value:e.formEdit.age,callback:function(t){e.$set(e.formEdit,"age",t)},expression:"formEdit.age"}})],1),r("el-form-item",{attrs:{label:"班级"}},[r("el-input",{model:{value:e.formEdit.clazz,callback:function(t){e.$set(e.formEdit,"clazz",t)},expression:"formEdit.clazz"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onEdit()}}},[e._v("确 定")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.studentList,"max-height":"300"}},[r("el-table-column",{attrs:{prop:"id",label:"id",width:"100"}}),r("el-table-column",{attrs:{prop:"studentname",label:"姓名",width:"100"}}),r("el-table-column",{attrs:{prop:"sex",label:"性别",width:"100"}}),r("el-table-column",{attrs:{prop:"age",label:"年龄",width:"100"}}),r("el-table-column",{attrs:{prop:"clazz",label:"班级",width:"100"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(r){return e.edit(t.row)}}},[e._v(" 编辑 ")]),r("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete"},nativeOn:{click:function(r){return r.preventDefault(),e.deleteRow(t.row.id)}}},[e._v(" 删除 ")])]}}])})],1)],1)},f=[],d=r("73ef"),p=r.n(d),g=p.a.create({baseURL:""});g.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.token=t),e}));var b=g,h={data:function(){return{msg:"",studentList:[],dialogVisible:!1,editVisible:!1,nowEditId:"",form:{id:"",studentname:"",sex:"",age:"",clazz:""},formEdit:{id:"",studentname:"",sex:"",age:"",clazz:""}}},methods:{logout:function(){localStorage.setItem("token",""),location.reload()},onSubmit:function(){var e=this;b.post("/",{student:this.form}).then((function(t){2e4===t.data.code?(e.getStudentList(),e.dialogVisible=!1,e.$message({message:"添加成功",type:"success"})):(e.$message.error(t.data.msg),console.log(t))}))},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){b.delete("/".concat(e)).then((function(){t.$message({type:"success",message:"删除成功!"}),t.getStudentList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getStudentList:function(){var e=this;b.get("/").then((function(t){e.studentList=t.data.data}))},onEdit:function(){var e=this;b.put("/".concat(this.nowEditId),{student:this.formEdit}).then((function(t){2e4===t.data.code?(e.getStudentList(),e.editVisible=!1,e.$message({message:"修改成功",type:"success"})):(e.$message.error(t.data.msg),console.log(t))}))},edit:function(e){this.nowEditId=e.id,this.formEdit.studentname=e.studentname,this.formEdit.sex=e.sex,this.formEdit.age=e.age,this.formEdit.clazz=e.clazz,this.editVisible=!0}},created:function(){this.getStudentList()}},v=h,x=Object(a["a"])(v,m,f,!1,null,null,null),F=x.exports,k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("h1",[e._v("Login")]),r("el-form",{ref:"userForm",staticClass:"demo-userForm",attrs:{model:e.userForm,"status-icon":"",rules:e.rules,"label-width":"100px",width:"50%"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.userForm.pass,callback:function(t){e.$set(e.userForm,"pass",t)},expression:"userForm.pass"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("userForm")}}},[e._v("登录")]),r("el-button",{on:{click:function(t){return e.resetForm("userForm")}}},[e._v("重置")]),r("el-button",{attrs:{type:"primary"},on:{click:e.openReg}},[e._v("注册")])],1)],1)],1)},y=[],w={data:function(){var e=this,t=function(t,r,s){""===r?s(new Error("请输入密码")):(""!==e.userForm.checkPass&&e.$refs.userForm.validateField("checkPass"),s())};return{userForm:{username:"",pass:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"长度在 5 到 10 个字符",trigger:"blur"}],pass:[{required:!0,validator:t,trigger:"blur"},{min:5,max:10,message:"长度在 5 到 10 个字符",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),t.$message.error("登录失败"),!1;t.login()}))},resetForm:function(e){this.$refs[e].resetFields()},login:function(){var e=this;b.post("/login",{username:this.userForm.username,password:this.userForm.pass}).then((function(t){2e4===t.data.code?(localStorage.setItem("token",t.data.token),e.$message({message:"登录成功",type:"success"}),e.$router.push("/")):e.$message.error(t.data.msg)})).catch((function(t){console.log(t),e.$message.error("登录失败")}))},openReg:function(){this.$router.push("/register")}}},$=w,E=(r("31d5"),Object(a["a"])($,k,y,!1,null,"98db3df4",null)),_=E.exports,z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register"},[r("h1",[e._v("Register")]),r("el-form",{ref:"userForm",staticClass:"demo-userForm",attrs:{model:e.userForm,"status-icon":"",rules:e.rules,"label-width":"100px",width:"50%"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",t)},expression:"userForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.userForm.pass,callback:function(t){e.$set(e.userForm,"pass",t)},expression:"userForm.pass"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.userForm.checkPass,callback:function(t){e.$set(e.userForm,"checkPass",t)},expression:"userForm.checkPass"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.openLogin}},[e._v("登录")]),r("el-button",{on:{click:function(t){return e.resetForm("userForm")}}},[e._v("重置")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("userForm")}}},[e._v("注册")])],1)],1)],1)},S=[],P={data:function(){var e=this,t=function(t,r,s){""===r?s(new Error("请输入密码")):(""!==e.userForm.checkPass&&e.$refs.userForm.validateField("checkPass"),s())},r=function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.userForm.pass?s(new Error("两次输入密码不一致!")):s()};return{userForm:{username:"",pass:"",checkPass:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"长度在 5 到 10 个字符",trigger:"blur"}],pass:[{required:!0,validator:t,trigger:"blur"},{min:5,max:10,message:"长度在 5 到 10 个字符",trigger:"blur"}],checkPass:[{required:!0,validator:r,trigger:"blur"},{min:5,max:10,message:"长度在 5 到 10 个字符",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),t.$message.error("注册失败"),!1;t.register()}))},resetForm:function(e){this.$refs[e].resetFields()},register:function(){var e=this;b.post("/register",{username:this.userForm.username,password:this.userForm.pass}).then((function(t){2e4===t.data.code?(e.$message({message:"注册成功",type:"success"}),e.$router.push("/login")):e.$message.error(t.data.msg)})).catch((function(t){e.$message.error("注册失败"),console.log(t)}))},openLogin:function(){this.$router.push("/login")}}},O=P,j=(r("31ed"),Object(a["a"])(O,z,S,!1,null,"19bf7aa6",null)),L=j.exports;s["default"].use(c["a"]);var V=[{path:"/",name:"Home",component:F},{path:"/login",name:"Login",component:_},{path:"/register",name:"Register",component:L}],C=new c["a"]({mode:"hash",base:"/",routes:V});C.beforeEach((function(e,t,r){if("/login"==e.path||"/register"==e.path)r();else{var s=localStorage.getItem("token");s?r():r("/login")}}));var I=C,R=r("2763"),q=r.n(R);r("ccc1");s["default"].use(q.a),s["default"].config.productionTip=!1,new s["default"]({router:I,render:function(e){return e(u)}}).$mount("#app")},"85ec":function(e,t,r){},eb07:function(e,t,r){},eb31:function(e,t,r){}});
//# sourceMappingURL=app.e83b9195.js.map